# Next.js テトリスゲーム

Next.js 14 (App Router) で構築されたシンプルなテトリスゲームです。

## 機能

- **テトリスゲーム**: React フックを使用したフル機能テトリス実装
- **レスポンシブデザイン**: Tailwind CSS によるモバイルフレンドリーなインターフェース
- **リアルタイムスコア**: ゲーム内でのリアルタイムスコア計算
- **ライン消去**: 複数ラインの同時消去に対応
- **レベルアップ**: ライン消去に応じたレベルアップとスピード調整
- **BGM**: コロブチカの音楽でゲームをより楽しく（手動ON/OFF機能付き）

## 技術スタック

- **フロントエンド**: Next.js 14 (App Router), React, TypeScript
- **スタイリング**: Tailwind CSS
- **音楽**: Web Audio API
- **デプロイ**: Vercel 対応

## セットアップ

### 前提条件

- Node.js 18+ 

### インストール

1. リポジトリのクローン:
```bash
git clone <repository-url>
cd nextjs-tetris
```

2. 依存関係のインストール:
```bash
npm install
```

3. 開発サーバーの起動:
```bash
npm run dev
```

ブラウザで [http://localhost:3000](http://localhost:3000) を開いてください。

## ゲーム操作

- **← →**: ピースを左右に移動
- **↓**: ソフトドロップ（落下速度を上げる）
- **↑**: ハードドロップ（瞬間落下）
- **Shift**: ピースを回転
- **P**: ゲームの一時停止/再開

## ゲームルール

- 7種類のテトロミノ（I, O, T, S, Z, J, L）を使用
- 横一列が完成するとラインが消去されます
- 10ライン消去するごとにレベルアップし、落下速度が上がります
- スコアは消去したライン数とレベルに応じて計算されます
- ハードドロップでボーナスポイントを獲得できます

## スコア計算

- ライン消去: 消去ライン数 × 100 × レベル
- ハードドロップ: 落下距離 × 2
- 基本動作: 10ポイント

## プロジェクト構造

```
src/
├── app/                    # Next.js App Router
│   ├── globals.css        # グローバルスタイル
│   ├── layout.tsx         # ルートレイアウト（lang="ja"設定）
│   └── page.tsx           # ホームページ
├── components/            # React コンポーネント
│   └── TetrisGame.tsx     # メインゲームコンポーネント
└── public/
    └── audio/
        └── コロブチカ.mp3  # BGM音楽ファイル
```

## ビルドとデプロイ

### 本番ビルド

```bash
npm run build
npm start
```

### Vercel でのデプロイ

1. コードを GitHub にプッシュ
2. リポジトリを Vercel に接続
3. デプロイ！

## 開発

### 型安全性

このプロジェクトは TypeScript を使用しており、テトリスピースの型定義やコンポーネントの型安全性が保証されています。

### パフォーマンス

- React の `useCallback` と `useMemo` を適切に使用してパフォーマンスを最適化
- 不要な再レンダリングを防ぐための依存関係の最適化
- クライアントサイドでの音楽再生とゲームループの最適化

## 音楽素材について

BGMで使用しているコロブチカの音楽は、[こちら](https://www.s-pst.info/12dl_mp3/dl_mp3_1.htm)より引用させていただきました。